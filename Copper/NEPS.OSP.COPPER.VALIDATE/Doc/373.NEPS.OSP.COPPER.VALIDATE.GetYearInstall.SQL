SPOOL "C:\Temp\NEPS.OSP.COPPER.VALIDATE.GetYearInstall.LOG";

SET DEFINE OFF;

SET SERVEROUTPUT ON;

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 * PROJECT NAME 	: COPPER VALIDATE
 * FUNCTIONALITY 	: GET YEAR_INSTALL
 * REFF DOCUMENT	: 
 * PROPOSED SQL		: TO REGISTER DLL TO GTECH SYSTEM
 * ASSEMBY NAME		: NEPS.OSP.COPPER.VALIDATE
 * NAMESPACE		: NEPS.OSP.COPPER.VALIDATE
 * CREATED BY		: AGENG SETIAWAN
 * CREATED DATE		: 20 OCT 2011 12:20 PM
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */

DECLARE
	v_G3E_FINO 	G3E_FUNCTIONALINTERFACE.G3E_FINO%TYPE;
BEGIN
	/*
	Name                Null?    Type
	------------------- -------- -------------
	G3E_FINO            NOT NULL NUMBER(9)
	G3E_USERNAME        NOT NULL VARCHAR2(80)
	G3E_INTERFACE       NOT NULL VARCHAR2(256)
	G3E_ARGUMENTPROMPT           RAW(2000)
	G3E_ARGUMENTTYPE             RAW(2000)
	G3E_EDITDATE        NOT NULL DATE
	G3E_PRJNO                    NUMBER(9)
	G3E_DESCRIPTION              VARCHAR2(256)
	*/
	-- SELECT LATEST G3E_FINO
	SELECT G3E_FUNCTIONALINTERFACE_SEQ.NEXTVAL INTO v_G3E_FINO FROM DUAL;
	DBMS_OUTPUT.PUT_LINE('G3E_FINO = '||v_G3E_FINO);
	
	-- REGISTER DLL INTO G3E_FUNCTIONALINTERFACE
	INSERT INTO G3E_FUNCTIONALINTERFACE (G3E_FINO, G3E_USERNAME, G3E_INTERFACE, G3E_ARGUMENTPROMPT, G3E_ARGUMENTTYPE, G3E_EDITDATE, G3E_PRJNO, G3E_DESCRIPTION)
	VALUES (v_G3E_FINO, 'Get Year Install Base Job ID', 'NEPS.OSP.COPPER.VALIDATE:NEPS.OSP.COPPER.VALIDATE.GetYearInstall', NULL, NULL, TO_DATE('03/14/2012 12:29:43', 'MM/DD/YYYY HH24:MI:SS'), NULL, 'Get Year Install Base Job ID');
	COMMIT;
	
END;
/

DECLARE
	v_G3E_FINO 	G3E_FUNCTIONALINTERFACE.G3E_FINO%TYPE;
BEGIN
	SELECT G3E_FINO INTO v_G3E_FINO FROM G3E_FUNCTIONALINTERFACE WHERE G3E_USERNAME = 'Get Year Install Base Job ID';
	
	-- REGISTER G3E_FINO INTO G3E_ATTRIBUTE
	UPDATE G3E_ATTRIBUTE SET G3E_FINO = v_G3E_FINO, G3E_FUNCTIONALORDINAL = 1, G3E_FUNCTIONALTYPE = 'AddNew' WHERE G3E_ANO = (SELECT G3E_ANO FROM G3E_ATTRIBUTE WHERE G3E_CNO = 51 AND G3E_FIELD = 'YEAR_PLACED');
	COMMIT;
END;
/

SET SERVEROUTPUT OFF;

SPOOL OFF;
